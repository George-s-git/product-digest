<!doctype html><html lang="en"><head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J5F61R82ZJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J5F61R82ZJ');
</script>

<script src="https://cdn.amplitude.com/libs/analytics-browser-2.11.1-min.js.gz"></script><script src="https://cdn.amplitude.com/libs/plugin-session-replay-browser-1.8.0-min.js.gz"></script><script>window.amplitude.add(window.sessionReplay.plugin({sampleRate: 1}));window.amplitude.init('824d2d243dc20f7d04d46372ffbe0b7a', {"autocapture":{"elementInteractions":true}});</script>

<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Register</title>
<link rel="stylesheet" href="/css/style.css">
<script src="/js/common.js" defer></script>
<script defer>
async function init(){
  await buildTopBar({hasBack:true});
  const f = document.querySelector('form');
  f.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const msg = document.getElementById('regMsg');
  msg.style.color=''; msg.textContent=''; msg.innerHTML='';
  const payload = { name: f.name.value.trim(), surname: f.surname.value.trim(), email: f.email.value.trim(), pass: f.pass.value };
  try{
    const res = await fetch('/api/register',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(payload)});
    if(res.ok){
      msg.style.color = '#0a7';
      msg.innerHTML = 'Your account has been successfully created, <button class="btn" id="goLogin">Log In</button> now';
      const go = document.getElementById('goLogin');
      if(go){ go.addEventListener('click', ()=> window.location.href='/login.html'); }
    } else {
      const t = await res.text();
      let m = 'Registration failed';
      if (t && t.toLowerCase().includes('already')) m = 'This e-mail/user is already registered';
      msg.style.color = '#d00';
      msg.textContent = m;
    }
  }catch(err){
    msg.style.color = '#d00';
    msg.textContent = 'Registration failed';
  }
});
    if(res.ok) window.location.href='/'; else alert('Registration failed');
  });

// Track the CTA click on register page
const createBtn = document.getElementById('createBtn');
createBtn.addEventListener('click', ()=>{
  if (window.gtag) gtag('event', 'click_register_cta', { location: 'register_page' });
  if (window.amplitude && typeof amplitude.track === 'function') {
  amplitude.track('click_register_cta', { location: 'register_page' });
}
});

}
window.addEventListener('DOMContentLoaded', init);
</script>
</head><body>
<header></header>
<div class="container">
<form>
  <h2>Register new customer</h2>
  <label>Name</label>
  <input class="input" name="name" required>
  <label>Surname</label>
  <input class="input" name="surname" required>
  <label>e-mail</label>
  <input class="input" type="email" name="email" required>
  <label>Pass</label>
  <input class="input" type="password" name="pass" required>
  <div class="actions">
    <button id="createBtn" class="btn primary" type="submit">Create account</button>
  </div>
<div id="regMsg" class="small" style="margin-top:12px"></div>
</form>
</div>
</body></html>